@model FADMS.Areas.FAMSDEALER.Models.ItemViewModel
@{
    ViewData["Title"] = "AddItem";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int masterId = Convert.ToInt32(ViewBag.masterId);
}
<style>
    .form-control {
        display: block;
        width: 100%;
        height: calc(1.5em + .75rem + 2px);
        padding: .375rem .75rem;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #6e707e;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #d1d3e2;
        border-radius: .35rem;
        transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out,-webkit-box-shadow .15s ease-in-out;
    }

    .form-group {
        margin-bottom: 6px !important;
    }
</style>

<div class="col-md-12 mb-0 pb-0" style="width:98%">
    <div class="card-header border" style="background-color:#F7F7F7;margin-left: 6px;">
        <h4 class="font-weight-bold;margin-left: -26px;">
           নতুন আগ্নেয়াস্ত্র যোগ করুন 
        </h4>
    </div>
</div>

<div class="card" style="width:95%;margin-left: 20px;margin-right:20px;padding-left:20px">
    <div class="card-body" style=" margin-top: 20px;width:97%">
        <form asp-area="FAMSDEALER" asp-controller="ItemInfo" asp-action="AddItem" id="fromInfo" method="post" data-parsley-validate="parsley" enctype="multipart/form-data">
            <div asp-validation-summary="All" class="text-danger"></div>
            <input type="hidden" name="itemId" id="itemId" value="0"/>
            <input type="hidden" name="itemSpecificationId" id="itemSpecificationId" value="0"/>
            <div class="form-group row">
                <label for="model" class="col-sm-2 col-form-label">আগ্নেয়াস্ত্রের নাম </label>
                <div class="col-sm-4">
                    <input type="text" class="form-control" name="itemName" id="itemName" required>
                </div>
                <label for="model" class="col-sm-2 col-form-label">আগ্নেয়াস্ত্রের কোড  :</label>
                <div class="col-sm-4">
                    <input type="text" class="form-control" name="itemCode" id="itemCode" required>
                </div>
            </div>

            <hr />

            <div class="form-group row">
                <label for="gunType" class="col-sm-2 col-form-label text-left">আগ্নেয়াস্ত্রের ধরন </label>
                <div class="col-sm-4 input-group">
                    <select name="armsTypeId" id="armsTypeId" class="form-control input-group-sm">
                        <option value="1">নির্বাচন করুন</option>
                        @foreach (var item in Model.armTypes)
                        {
                            <option value="@item.Id">@item.ArmTypeNameBn</option>
                        }
                    </select>
                </div>
                <label for="model" class="col-sm-2 col-form-label">আগ্নেয়াস্ত্রের মডেল </label>
                <div class="col-sm-4">
                    <input type="text" class="form-control" name="costingMethod" id="costingMethod">
                </div>
            </div>
            <hr />
            <div class="form-group row" style="margin-left: 20%;">
                <label for="itemDescription" class="col-sm-2 col-form-label">আগ্নেয়াস্ত্রের বর্ণনা </label>
                <div class="col-sm-6">
                    <textarea maxlength="250" class="form-control" id="itemDescription" name="itemDescription"></textarea>
                </div>
            </div>
            <hr>
            <button type="submit" value="Submit" id="submit" class="btn btn-success float-right"><i class="fas fa-save"></i></button>
            <button type="reset" onclick="Refresh()" class="btn btn-danger float-right mr-2"><i class="fas fa-sync"></i></button>
        </form>
    </div>
</div>
<br />
@section Scripts{ 
    <script>
        $(document).ready(function () {
             if (@masterId>0) {
                 Common.Ajax('GET', '/FAMSDEALER/ItemInfo/GetItemSpecById/?id=' + @ViewBag.masterId, [], 'json', ajaxGetItemSpecById);
            }
        })
        function ajaxGetItemSpecById(res) {
            console.log(res);
            $('#itemId').val(res.itemId);
            $('#itemSpecificationId').val(res.Id);
            $('#itemCode').val(res.itemCode);
            $('#itemName').val(res.specificationName);
            $('#armsTypeId').val(res.ArmTypeId);
            $('#costingMethod').val(res.costingMethod);
            $('#itemDescription').val(res.itemDescription);
        }
        function Refresh() {
            $('#itemId').val(0);
            $('#itemCode').val("");
            $('#itemName').val("");
            $('#ArmTypeId').val("");
            $('#costingMethod').val("");
            $('#itemDescription').val("");
        }
        function Remove(id) {
             swal({
                title: 'Are you sure?', text: 'Do you want to delete this record!', type: 'warning', showCancelButton: true, confirmButtonColor: '#3085d6', cancelButtonColor: '#d33', confirmButtonText: 'Yes, delete it!'
            }).then(function () {
                $.ajax({
                    url: '@Url.Action("DeleteItems", "ItemInfo")',
                    data: { Id: id },
                    type: 'GET',
                })
                    .done(function (res) {
                        console.log(res);
                        swal('', 'Deleted Successfully!', 'success').then(function () {
                            location.reload();
                        })
					
                })
                .fail(function () {
					swal('', 'Unable to Delete!', 'warning');
                });
				});
        }
    </script>

}